(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(695)}])},695:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var o=r(5893),n=r(7294),l=r(6844);let i=(0,l.eI)("https://zwyjsybljgykghsixwus.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3eWpzeWJsamd5a2doc2l4d3VzIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODY5NDY5NTIsImV4cCI6MjAwMjUyMjk1Mn0.FlTTaWfeGdUa4zoX1ftC-jt7TF1T12SsGlZocOEoD9s");var s=r(6117),a=r(9037);function PdfViewer(e){let{url:t}=e,[r,l]=(0,n.useState)(null),[i,d]=(0,n.useState)(1);function onDocumentLoadSuccess(e){let{numPages:t}=e;l(t)}let c={padding:"8px 16px",border:"2px solid #007bff",backgroundColor:"#fff",color:"#007bff",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",outline:"none"},u={...c,backgroundColor:"#f8f9fa",borderColor:"#dee2e6",color:"#6c757d",cursor:"not-allowed"};return(0,o.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,o.jsxs)("div",{style:{marginBottom:"16px",textAlign:"center",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,o.jsx)("button",{onClick:()=>d(Math.max(1,i-1)),disabled:i<=1,style:i<=1?u:c,onMouseOver:e=>{i>1&&(e.target.style.backgroundColor="#007bff",e.target.style.color="#fff")},onMouseOut:e=>{i>1&&(e.target.style.backgroundColor="#fff",e.target.style.color="#007bff")},children:"← Previous"}),(0,o.jsxs)("span",{style:{margin:"0 20px",fontSize:"14px",fontWeight:"600",color:"#495057"},children:["Page ",i," of ",r]}),(0,o.jsx)("button",{onClick:()=>d(Math.min(r,i+1)),disabled:i>=r,style:i>=r?u:c,onMouseOver:e=>{i<r&&(e.target.style.backgroundColor="#007bff",e.target.style.color="#fff")},onMouseOut:e=>{i<r&&(e.target.style.backgroundColor="#fff",e.target.style.color="#007bff")},children:"Next →"})]}),(0,o.jsx)("div",{style:{border:"2px solid #dee2e6",borderRadius:"8px",flex:1,overflow:"auto",backgroundColor:"#fff"},children:(0,o.jsx)(s.Z,{file:t,onLoadSuccess:onDocumentLoadSuccess,loading:(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#6c757d",fontSize:"16px"},children:"\uD83D\uDCC4 Loading PDF..."}),error:(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#dc3545",fontSize:"16px"},children:"❌ Failed to load PDF"}),children:(0,o.jsx)(a.Z,{pageNumber:i,width:Math.min(500,.4*window.innerWidth),loading:(0,o.jsx)("div",{style:{padding:"20px",textAlign:"center",color:"#6c757d"},children:"Loading page..."})})})})]})}function PinTable(e){let{pinData:t}=e,[r,l]=(0,n.useState)(!1);if(!t)return null;let i=[];try{let e="string"==typeof t?JSON.parse(t):t;i=e.pins||[]}catch(e){return console.error("Error parsing pin data:",e),(0,o.jsx)("div",{style:{color:"#dc3545",padding:"16px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"8px"},children:"❌ Error parsing pin table data"})}if(0===i.length)return null;let s=i[0]||[],a=i.slice(1)||[];return(0,o.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,o.jsxs)("div",{onClick:()=>l(!r),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"#e3f2fd",border:"2px solid #90caf9",borderRadius:"8px",cursor:"pointer",marginBottom:r?"0":"16px",transition:"all 0.2s",userSelect:"none"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#bbdefb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#e3f2fd",children:[(0,o.jsx)("h3",{style:{margin:"0",color:"#1565c0",fontSize:"18px",fontWeight:"600"},children:"\uD83D\uDCCC Pin Table"}),(0,o.jsx)("span",{style:{fontSize:"20px",color:"#1565c0",transform:r?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:"▶"})]}),!r&&(0,o.jsx)("div",{style:{overflow:"auto",border:"2px solid #dee2e6",borderRadius:"8px",backgroundColor:"#fff",animation:"fadeIn 0.3s ease-in"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{style:{backgroundColor:"#e3f2fd",borderBottom:"2px solid #90caf9"},children:s.map((e,t)=>(0,o.jsx)("th",{style:{border:"none",padding:"12px 16px",textAlign:"left",fontWeight:"600",color:"#1565c0",fontSize:"14px"},children:e},t))})}),(0,o.jsx)("tbody",{children:a.map((e,t)=>(0,o.jsx)("tr",{style:{backgroundColor:t%2==0?"#fff":"#f8f9fa",borderBottom:"1px solid #dee2e6",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#e3f2fd",onMouseOut:e=>e.currentTarget.style.backgroundColor=t%2==0?"#fff":"#f8f9fa",children:e.map((e,t)=>(0,o.jsx)("td",{style:{border:"none",padding:"12px 16px",verticalAlign:"top",whiteSpace:"pre-wrap",color:"#495057",lineHeight:"1.5"},children:e},t))},t))})]})})]})}function RulesList(e){let{rules:t}=e,[r,l]=(0,n.useState)({}),[i,s]=(0,n.useState)(!1);if(!t||0===t.length)return null;let a=t.reduce((e,t)=>{let r=t.category||"Uncategorized";return e[r]||(e[r]=[]),e[r].push(t),e},{}),toggleCategory=e=>{l(t=>({...t,[e]:!t[e]}))},getLevelColor=e=>{switch(e){case"ESSENTIAL":return"#fff5f5";case"RECOMMENDED":return"#fffbf0";default:return"#f8f9fa"}},getLevelBorder=e=>{switch(e){case"ESSENTIAL":return"2px solid #dc3545";case"RECOMMENDED":return"2px solid #ffc107";default:return"1px solid #dee2e6"}},getLevelIcon=e=>{switch(e){case"ESSENTIAL":return"\uD83D\uDD34";case"RECOMMENDED":return"\uD83D\uDFE1";default:return"⚪"}};return(0,o.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,o.jsxs)("div",{onClick:()=>s(!i),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"#e3f2fd",border:"2px solid #90caf9",borderRadius:"8px",cursor:"pointer",marginBottom:i?"0":"16px",transition:"all 0.2s",userSelect:"none"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#bbdefb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#e3f2fd",children:[(0,o.jsx)("h3",{style:{margin:"0",color:"#1565c0",fontSize:"18px",fontWeight:"600"},children:"\uD83D\uDCCB Rules"}),(0,o.jsx)("span",{style:{fontSize:"20px",color:"#1565c0",transform:i?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:"▶"})]}),!i&&(0,o.jsx)("div",{style:{animation:"fadeIn 0.3s ease-in"},children:Object.entries(a).map(e=>{let[t,n]=e,l=r[t];return(0,o.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,o.jsxs)("div",{onClick:()=>toggleCategory(t),style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0 0 12px 0",padding:"12px 16px",backgroundColor:"#e3f2fd",border:"2px solid #90caf9",borderRadius:"8px",fontSize:"16px",fontWeight:"600",color:"#1565c0",cursor:"pointer",transition:"all 0.2s",userSelect:"none"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#bbdefb",onMouseOut:e=>e.currentTarget.style.backgroundColor="#e3f2fd",children:[(0,o.jsxs)("span",{children:["\uD83D\uDCC2 ",t]}),(0,o.jsx)("span",{style:{fontSize:"16px",transform:l?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:"▶"})]}),!l&&(0,o.jsx)("div",{style:{paddingLeft:"8px",animation:"fadeIn 0.3s ease-in"},children:n.map((e,t)=>(0,o.jsxs)("div",{style:{marginBottom:"12px",padding:"16px",backgroundColor:getLevelColor(e.level),border:getLevelBorder(e.level),borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.15)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[(0,o.jsx)("span",{style:{marginRight:"8px",fontSize:"16px"},children:getLevelIcon(e.level)}),(0,o.jsx)("span",{style:{fontSize:"12px",fontWeight:"700",color:"ESSENTIAL"===e.level?"#dc3545":"#ffc107",textTransform:"uppercase",letterSpacing:"0.5px",padding:"4px 8px",backgroundColor:"ESSENTIAL"===e.level?"#f8d7da":"#fff3cd",borderRadius:"4px",border:"1px solid ".concat("ESSENTIAL"===e.level?"#f5c6cb":"#ffeaa7")},children:e.level})]}),(0,o.jsx)("div",{style:{fontSize:"14px",lineHeight:"1.6",whiteSpace:"pre-wrap",color:"#495057"},children:e.content})]},t))})]},t)})})]})}function Home(){let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)([]),[s,a]=(0,n.useState)(!0),[d,c]=(0,n.useState)(""),[u,f]=(0,n.useState)([]),[p,x]=(0,n.useState)(""),[g,h]=(0,n.useState)(!1),[b,y]=(0,n.useState)(50),[m,v]=(0,n.useState)(!1),C=(0,n.useRef)(),j=(0,n.useRef)();async function fetchParts(){try{let{data:e,error:t}=await i.from("schematic_part").select("part_id");if(t)throw t;f(e||[])}catch(e){console.error("Error fetching parts:",e)}}async function fetchPartData(e){a(!0);try{let{data:r,error:o}=await i.from("schematic_part").select("*").eq("part_id",e).single();if(o)throw o;let{data:n,error:s}=await i.from("schematic_checklist").select("uuid").eq("part_id",e).single();if(s)throw s;let{data:a,error:d}=await i.from("schematic_rule").select("*").eq("checklist_id",n.uuid);if(d)throw d;t(r),l(a||[])}catch(e){console.error("Error fetching data:",e)}finally{a(!1)}}(0,n.useEffect)(()=>{fetchParts()},[]),(0,n.useEffect)(()=>{d&&fetchPartData(d)},[d]),(0,n.useEffect)(()=>{let handleMouseMove=e=>{if(!m||!C.current)return;let t=C.current.getBoundingClientRect(),r=(e.clientX-t.left)/t.width*100;y(Math.max(20,Math.min(80,r)))},handleMouseUp=()=>{v(!1)};return m&&(document.addEventListener("mousemove",handleMouseMove),document.addEventListener("mouseup",handleMouseUp)),()=>{document.removeEventListener("mousemove",handleMouseMove),document.removeEventListener("mouseup",handleMouseUp)}},[m]),(0,n.useEffect)(()=>{let handleClickOutside=e=>{j.current&&!j.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[]);let S=u.filter(e=>e.part_id.toLowerCase().startsWith(p.toLowerCase())),handlePartSelect=e=>{c(e),x(""),h(!1)};return(0,o.jsxs)("div",{ref:C,style:{display:"flex",height:"100vh",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',backgroundColor:"#f8f9fa"},children:[(0,o.jsxs)("div",{style:{width:"".concat(b,"%"),padding:"20px",backgroundColor:"#fff",boxShadow:"2px 0 4px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,o.jsxs)("h2",{style:{margin:"0 0 20px 0",color:"#2c3e50",fontSize:"24px",fontWeight:"600"},children:["Datasheet Viewer",e?": Part ".concat(e.part_id):""]}),(null==e?void 0:e.datasheet_url)?(0,o.jsx)("div",{style:{flex:1,overflow:"hidden"},children:(0,o.jsx)(PdfViewer,{url:e.datasheet_url})}):e?(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center",border:"2px dashed #ddd",borderRadius:"8px",backgroundColor:"#f8f9fa",color:"#6c757d",fontSize:"16px"},children:"\uD83D\uDCC4 Datasheet URL not found!"}):(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#6c757d",fontSize:"16px"},children:"Select a part to view datasheet"})]}),(0,o.jsx)("div",{style:{width:"4px",backgroundColor:"#e9ecef",cursor:"col-resize",display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:()=>v(!0),children:(0,o.jsx)("div",{style:{width:"2px",height:"40px",backgroundColor:"#6c757d",borderRadius:"1px"}})}),(0,o.jsxs)("div",{style:{width:"".concat(100-b,"%"),padding:"20px",overflow:"auto",backgroundColor:"#fff"},children:[(0,o.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,o.jsx)("h2",{style:{margin:"0 0 20px 0",color:"#2c3e50",fontSize:"24px",fontWeight:"600"},children:"Part Information"}),(0,o.jsxs)("div",{ref:j,style:{marginBottom:"16px",position:"relative"},children:[(0,o.jsx)("input",{type:"text",placeholder:"Search parts...",value:p,onChange:e=>{let t=e.target.value;x(t),h(t.length>=2)},style:{width:"100%",padding:"12px 16px",border:"2px solid #e9ecef",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s",marginBottom:"12px"},onFocus:e=>{e.target.style.borderColor="#007bff",p.length>=2&&h(!0)},onBlur:e=>e.target.style.borderColor="#e9ecef"}),g&&S.length>0&&(0,o.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"#fff",border:"2px solid #007bff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:S.slice(0,10).map((e,t)=>(0,o.jsx)("div",{onClick:()=>handlePartSelect(e.part_id),style:{padding:"12px 16px",cursor:"pointer",borderBottom:t<Math.min(S.length,10)-1?"1px solid #e9ecef":"none",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f8f9fa",onMouseOut:e=>e.currentTarget.style.backgroundColor="#fff",children:e.part_id},e.part_id))})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#495057",fontSize:"14px"},children:"Select Part:"}),(0,o.jsxs)("select",{value:d,onChange:e=>c(e.target.value),style:{width:"100%",padding:"12px 16px",fontSize:"14px",border:"2px solid #e9ecef",borderRadius:"8px",backgroundColor:"#fff",outline:"none"},children:[(0,o.jsx)("option",{value:"",children:"Choose a part..."}),u.map(e=>(0,o.jsx)("option",{value:e.part_id,children:e.part_id},e.part_id))]})]})]}),s&&d&&(0,o.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#6c757d"},children:"Loading..."}),e&&(0,o.jsxs)("div",{style:{animation:"fadeIn 0.3s ease-in"},children:[e.pin_table&&(0,o.jsx)(PinTable,{pinData:e.pin_table}),r.length>0&&(0,o.jsx)(RulesList,{rules:r})]})]})]})}}},function(e){e.O(0,[892,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);